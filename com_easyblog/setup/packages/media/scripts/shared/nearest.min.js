EasyBlog.module("shared/nearest",function(r){var g={left:[-1,0],up:[0,-1],right:[1,0],down:[0,1]};r.distance=function(t,n,a){a=g[a];var l,h,e,i,u=t.offset(),r=t.outerWidth(),s=t.outerHeight(),o=u.left,M=u.top,f=o+r,m=M+s,d=o+r/2,b=M+s/2,c=n.offset(),t=n.outerWidth(),u=n.outerHeight(),r=c.left,s=c.top,n=r+t,c=s+u,t=r+t/2,u=s+u/2;return 0==a[1]?(a[0]<0?(n<=o&&(l=o-n),t<=o&&(l=null!=l?Math.min(l,o-t):o-t),n<=o&&(l=null!=l?Math.min(l,o-n):o-n)):(f<=r&&(l=r-f),f<=t&&(l=null!=l?Math.min(l,t-f):t-f),o<r&&(l=null!=l?Math.min(l,r-o):r-o)),h=2*Math.min(Math.abs(b-s),Math.abs(b-u),Math.abs(b-c))):0==a[0]&&(a[1]<0?(c<=M&&(h=M-c),u<=M&&(h=null!=h?Math.min(h,M-u):M-u),c<=M&&(h=null!=h?Math.min(h,M-c):M-c)):(m<=s&&(h=s-m),m<=u&&(h=null!=h?Math.min(h,u-m):u-m),M<s&&(h=null!=h?Math.min(h,s-M):s-M)),l=2*Math.min(Math.abs(d-r),Math.abs(d-t),Math.abs(d-n))),null==l||null==h?-1:(e=l,i=h,Math.floor(Math.sqrt(e*e+i*i)))},r.fn.nearest=function(t,n){for(var a,l,h=r(),e=null,i=-1,u=t.length;++i<u;)a=r(t[i]),this[0]!=a[0]&&0<=(l=r.distance(this,a,n))&&(null===e||l<e)&&(e=l,h=a);return h},this.resolve()});