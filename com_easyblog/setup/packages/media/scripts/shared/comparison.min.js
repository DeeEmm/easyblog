EasyBlog.module("shared/comparison",function(e){var i=this;EasyBlog.require().script("shared/mobile").done(function(g){g.fn.comparison=function(){function e(e){e.each(function(){g(this).addClass("is-visible")}),n=!1}function i(e){e.each(function(){var e=g(this);u(e.find('.cd-image-label[data-type="modified"]'),e.find(".cd-resize-img"),"left"),u(e.find('.cd-image-label[data-type="original"]'),e.find(".cd-resize-img"),"right")}),o=!1}function m(e,i,n,o,t,s,a,d,r,f){i=e.pageX+i-n;i<o?i=o:t<i&&(i=t);a=100*(i+n/2-s)/a+"%";g(".draggable").css("left",a).on("mouseup vmouseup",function(){g(this).removeClass("draggable"),d.removeClass("resizable")}),g(".resizable").css("width",a),u(f,d,"left"),u(r,d,"right"),c=!1}function u(e,i,n){"left"==n?e.offset().left+e.outerWidth()<i.offset().left+i.outerWidth()?e.removeClass("is-hidden"):e.addClass("is-hidden"):e.offset().left>i.offset().left+i.outerWidth()?e.removeClass("is-hidden"):e.addClass("is-hidden")}var c=!1,n=!1,o=!1,t=g(this).find("> figure.cd-image-container");e(t),g(window).on("scroll",function(){n||(n=!0,window.requestAnimationFrame?requestAnimationFrame(function(){e(t)}):setTimeout(function(){e(t)},100))}),t.each(function(){var d,r,f,u,l,e=g(this);d=e.find(".cd-handle"),r=e.find(".cd-resize-img"),u=(f=e).find('.cd-image-label[data-type="original"]'),l=e.find('.cd-image-label[data-type="modified"]'),d.on("mousedown vmousedown",function(e){d.addClass("draggable"),r.addClass("resizable");var i=d.outerWidth(),n=d.offset().left+i-e.pageX,o=f.offset().left,t=f.outerWidth(),s=o+10,a=o+t-i-10;d.parents().on("mousemove vmousemove",function(e){c||(c=!0,window.requestAnimationFrame?requestAnimationFrame(function(){m(e,n,i,s,a,o,t,r,u,l)}):setTimeout(function(){m(e,n,i,s,a,o,t,r,u,l)},100))}).on("mouseup vmouseup",function(e){d.removeClass("draggable"),r.removeClass("resizable")}),e.preventDefault()}).on("mouseup vmouseup",function(e){d.removeClass("draggable"),r.removeClass("resizable")})}),g(window).on("resize",function(){o||(o=!0,window.requestAnimationFrame?requestAnimationFrame(function(){i(t)}):setTimeout(function(){i(t)},100))})},i.resolve()})});