EasyBlog.module("shared/mobile",function(i){var t,e,n;t=this,e=document,n=function(t,e,n,o){!function(v,t,h){function d(t){for(;t&&void 0!==t.originalEvent;)t=t.originalEvent;return t}function a(t){for(var e,n,o={};t;){for(n in e=v.data(t,T))e[n]&&(o[n]=o.hasVirtualBinding=!0);t=t.parentNode}return o}function o(){j=!0}function i(){j=!1}function r(){u(),Y=setTimeout(function(){S=Y=0,B.length=0,N=!1,o()},v.vmouse.resetTimerDuration)}function u(){Y&&(clearTimeout(Y),Y=0)}function s(t,e,n){var o;return(n&&n[t]||!n&&function(t,e){for(var n;t;){if((n=v.data(t,T))&&(!e||n[e]))return t;t=t.parentNode}}(e.target,t))&&(o=function(t,e){var n,o,i,a,r,u,s,c=t.type;if((t=v.Event(t)).type=e,n=t.originalEvent,o=v.event.props,-1<c.search(/^(mouse|click)/)&&(o=P),n)for(r=o.length;r;)t[i=o[--r]]=n[i];if(-1<c.search(/mouse(down|up)|click/)&&!t.which&&(t.which=1),-1!==c.search(/^touch/)&&(c=(e=d(n)).touches,e=e.changedTouches,a=c&&c.length?c[0]:e&&e.length?e[0]:h))for(u=0,s=y.length;u<s;u++)t[i=y[u]]=a[i];return t}(e,t),v(e.target).trigger(o)),o}function c(t){var e=v.data(t.target,k);N||S&&S===e||(e=s("v"+t.type,t))&&(e.isDefaultPrevented()&&t.preventDefault(),e.isPropagationStopped()&&t.stopPropagation(),e.isImmediatePropagationStopped()&&t.stopImmediatePropagation())}function l(t){var e,n,o=d(t).touches;o&&1===o.length&&(e=a(n=t.target)).hasVirtualBinding&&(S=L++,v.data(n,k,S),u(),i(),M=!1,n=d(t).touches[0],w=n.pageX,I=n.pageY,s("vmouseover",t,e),s("vmousedown",t,e))}function f(t){j||(M||s("vmousecancel",t,a(t.target)),M=!0,r())}function p(t){var e,n,o,i;j||(e=d(t).touches[0],n=M,o=v.vmouse.moveDistanceThreshold,i=a(t.target),(M=M||Math.abs(e.pageX-w)>o||Math.abs(e.pageY-I)>o)&&!n&&s("vmousecancel",t,i),s("vmousemove",t,i),r())}function m(t){var e,n;j||(o(),s("vmouseup",t,e=a(t.target)),M||(n=s("vclick",t,e))&&n.isDefaultPrevented()&&(n=d(t).changedTouches[0],B.push({touchID:S,x:n.clientX,y:n.clientY}),N=!0),s("vmouseout",t,e),M=!1,r())}function g(t){var e,n=v.data(t,T);if(n)for(e in n)if(n[e])return 1}function b(){}v.event.props==h&&(v.event.props=[]);var D,e,T="virtualMouseBindings",k="virtualTouchID",n="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),y="clientX clientY pageX pageY screenX screenY".split(" "),E=v.event.mouseHooks?v.event.mouseHooks.props:[],P=v.event.props.concat(E),X={},Y=0,w=0,I=0,M=!1,B=[],N=!1,j=!1,x="addEventListener"in t,H=v(t),L=1,S=0;for(v.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500},e=0;e<n.length;e++)v.event.special[n[e]]=function(n){var o=n.substr(1);return{setup:function(){g(this)||v.data(this,T,{}),v.data(this,T)[n]=!0,X[n]=(X[n]||0)+1,1===X[n]&&H.bind(o,c),v(this).bind(o,b),x&&(X.touchstart=(X.touchstart||0)+1,1===X.touchstart&&H.bind("touchstart",l).bind("touchend",m).bind("touchmove",p).bind("scroll",f))},teardown:function(){--X[n],X[n]||H.unbind(o,c),x&&(--X.touchstart,X.touchstart||H.unbind("touchstart",l).unbind("touchmove",p).unbind("touchend",m).unbind("scroll",f));var t=v(this),e=v.data(this,T);e&&(e[n]=!1),t.unbind(o,b),g(this)||t.removeData(T)}}}(n[e]);x&&t.addEventListener("click",function(t){var e,n,o,i,a,r=B.length,u=t.target;if(r)for(e=t.clientX,n=t.clientY,D=v.vmouse.clickDistanceThreshold,o=u;o;){for(i=0;i<r;i++)if(a=B[i],o===u&&Math.abs(a.x-e)<D&&Math.abs(a.y-n)<D||v.data(o,k)===a.touchID)return t.preventDefault(),void t.stopPropagation();o=o.parentNode}},!0)}(i,n)},"function"==typeof define&&define.amd?define(["jquery"],function(t){return n(0,0,e),t.mobile}):n(t.jQuery,0,e),this.resolve()});