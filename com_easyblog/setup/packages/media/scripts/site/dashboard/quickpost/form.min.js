EasyBlog.module("site/dashboard/quickpost/form",function(t){var a=this;EasyBlog.require().script("site/dashboard/quickpost/standard").script("site/dashboard/quickpost/quote").script("site/dashboard/quickpost/link").script("site/dashboard/quickpost/photo").script("site/dashboard/quickpost/video").script("site/dashboard/quickpost/tags").done(function(i){EasyBlog.Controller("Quickpost.Form",{defaultOptions:{"{form}":"[data-quickpost-form]","{publishButton}":"[data-quickpost-publish]","{alert}":"[data-quickpost-alert]","{toggleExtended}":"[data-quickpost-extended-toggle]","{extended}":"[data-quickpost-extended]","{extendedPanel}":"[data-quickpost-extended-panel]","{autopost}":"[data-autopost-item]","{closeAlertButton}":"[data-quickpost-alert] [data-fd-dismiss=alert]","{alertWrapper}":"[data-quickpost-alert] [data-fd-alert]","{tab}":"[data-quickpost-tab]"}},function(d,t){return{init:function(){t.standard=d.addPlugin("standard","EasyBlog.Controller.Quickpost.Form.Standard"),t.quote=d.addPlugin("quote","EasyBlog.Controller.Quickpost.Form.Quote"),t.link=d.addPlugin("link","EasyBlog.Controller.Quickpost.Form.Link"),t.photo=d.addPlugin("photo","EasyBlog.Controller.Quickpost.Form.Photo"),t.video=d.addPlugin("video","EasyBlog.Controller.Quickpost.Form.Video")},implementTags:function(t){t.implement("EasyBlog.Controller.Quickpost.Form.Tags")},implementPhotoUploader:function(t,e,a,o){var s=t.plupload2(i.extend({},o),!1);s.bind("FilesAdded",function(t,a){s.start(),e()}),s.bind("FileUploaded",a)},"{tab} click":function(t,a){t=t.data("quickpost-tab");d.trigger("onTabChange",[t])},"{toggleExtended} click":function(t,a){var e=d.extended.of(t).find(d.extendedPanel.selector),o=t.parents(d.form.selector),t=!e.hasClass("t-hidden");o.toggleClass("is-extended",!t),e.toggleClass("t-hidden",t)},"{closeAlertButton} click":function(t,a){a.preventDefault(),a.stopPropagation(),d.alert().addClass("t-hidden")},"{publishButton} click":function(t,a){var e=d.form.of(t),o=e.data("type"),s=i.Task();d.trigger("onPublishQuickPost",[s,o,e]),s.data.autopost=[],e.find(d.autopost.selector+":checked").each(function(){var t=i(this).val();s.data.autopost.push(t)}),d.alert().addClass("t-hidden"),t.addClass("is-loading"),d.alertWrapper().removeClass("o-alert--success o-alert--danger"),s.process().done(function(){EasyBlog.ajax("site/views/quickpost/save",s.data).done(function(t){console.log(d.alert().find("[data-fd-alert-message]")),d.alert().removeClass("t-hidden"),d.alertWrapper().addClass("o-alert--success").find("[data-fd-alert-message]").html(t.message),d.trigger("onClearForm",[s,o,e])}).fail(function(t){d.alert().removeClass("t-hidden"),d.alertWrapper().addClass("o-alert--danger").find("[data-fd-alert-message]").html(t.message)}).always(function(){t.removeClass("is-loading")})})}}}),a.resolve()})});