EasyBlog.module("site/dashboard/table",function(e){var t=this;EasyBlog.require().script("site/vendors/affix").done(function(c){EasyBlog.Controller("Dashboard.Table",{defaultOptions:{"{checkAll}":"[data-eb-table-checkall]","{checkbox}":"[data-eb-table-checkbox]","{filterBar}":"[data-eb-filter-bar]","{affix}":"[data-eb-spy=affix]","{row}":"table > tbody > tr","{tableHeader}":"[data-table-header]","{action}":"[data-eb-action]","{actions}":"[data-eb-table-actions]","{apply}":"[data-eb-table-apply]","{task}":"[data-eb-table-task]","{search}":"[data-eb-form-search]","{returnInput}":"[data-table-grid-return]","{idInput}":"[data-table-grid-id]","{taskInput}":"[data-fd-table-task=easyblog]","{sortInput}":"input:hidden[name=sort]","{orderingInput}":"input:hidden[name=ordering]","{sortButton}":"[data-table-grid-sort]"}},function(o,n){return{init:function(){o.initTableHeader(),o.updateHeader(),c(window).resize(function(){o.updateHeader()})},initTableHeader:function(){o.tableHeader().length<=0||o.element.find("table").find("thead").appendTo(o.tableHeader())},updateHeader:function(){var e=o.element.width(),t=o.affix().offset();o.affix().css("width",e),o.affix().affix({offset:{top:t.top-20}})},submitForm:function(){o.element.submit()},getSelectedCheckbox:function(){var a=[];return o.checkbox(":checked").each(function(e,t){a.push(c(t).val())}),a},clearSelectedCheckboxes:function(){o.checkAll().prop("checked",!1),o.checkAll().trigger("change")},"{sortButton} click":function(e){var t=e.data("column"),e=e.data("ordering");o.sortInput().val(t),o.orderingInput().val(e),o.submitForm()},"{search} click":function(){o.submitForm()},"{action} click":function(e,t){t.stopPropagation();var a=e.data("eb-action"),t=e.parents("[data-eb-actions]").data("id"),e=e.data("type");"dialog"!=e?"form"==e&&(o.clearSelectedCheckboxes(),o.idInput().val(t),o.taskInput().val(a),o.submitForm()):EasyBlog.dialog({content:EasyBlog.ajax(a,{ids:[t]}),bindings:{"{submitButton} click":function(){this.form().submit()}}})},"{row} click":function(e,t){var a=void 0===n.inputName?"ids":n.inputName,i=e.find("input[name="+a+"\\[\\]]"),a=i.is(":checked");e.toggleClass("is-checked",!a),i.is(":disabled")||(a?i.prop("checked",!1):i.prop("checked",!0)).trigger("change")},"{checkAll} change":function(e,t){e=e.is(":checked");e?(o.filterBar().addClass("is-bulk-action"),o.actions().removeClass("t--invisible sm:t-d--none")):(o.filterBar().removeClass("is-bulk-action"),o.actions().addClass("t--invisible sm:t-d--none")),o.checkbox().not(":disabled").prop("checked",e)},"{checkbox} change":function(e,t){if(0<o.getSelectedCheckbox().length)return o.filterBar().addClass("is-bulk-action"),void o.actions().removeClass("t--invisible sm:t-d--none");o.filterBar().removeClass("is-bulk-action"),o.actions().addClass("t--invisible sm:t-d--none")},"{apply} click":function(e,t){var a=c.trim(o.task().val());if(""==a)return!1;var i=o.task().find(":selected").data("confirmation");if(!i)return o.taskInput().val(a),o.submitForm(),!1;var n=o.getSelectedCheckbox();EasyBlog.dialog({content:EasyBlog.ajax(i,{ids:n}),bindings:{"{submitButton} click":function(){o.taskInput().val(a),o.submitForm()}}})}}}),t.resolve()})});