FD50.module("accordion",function(e){e=function(){!function(){"use strict";var o=function(i){NodeList.prototype.isPrototypeOf(i.node)?i.node.forEach(function(e){var t=i;t.node=e,new o(t)}):i.node instanceof HTMLElement?(this.node=i.node,this.eventNode=i.eventNode?this.node.querySelector(i.eventNode):this.node,this.isCollapsed=void 0!==this.node.dataset.collapsibleCollapsed||null,this.isCollapsed||(this.isCollapsed=!(!i.isCollapsed||"boolean"!=typeof i.isCollapsed)&&i.isCollapsed),this.observe="boolean"==typeof i.observe&&i.observe,this.expandCallback="function"==typeof i.expandCallback?i.expandCallback:null,this.collapseCallback="function"==typeof i.collapseCallback?i.collapseCallback:null,this.observeCallback="function"==typeof i.observeCallback?i.observeCallback:null,this.mutationCallback="function"==typeof i.mutationCallback?i.mutationCallback:null,this.init()):console.error(i.node,"is not a NodeList or an instance of HTMLElement")};o.prototype.init=function(){this.updateHeights(),this.isCollapsed?(this.node.style.height=this.collapsedHeight+"px",this.node.classList.add("is-collapsed")):this.node.classList.contains("is-expanded")&&this.node.classList.add("is-active"),this.eventNode.addEventListener("click",function(){this.toggleCollapse()}.bind(this)),window.addEventListener("resize",this.updateHeights.bind(this,null)),this.observe&&this.initObserver(),this.node.collapsible=this},o.prototype.updateHeights=function(e){e=e||0,this.collapsedHeight=o.parseNumber(window.getComputedStyle(this.eventNode).height),this.node.style.height="auto",this.expandedHeight=o.parseNumber(window.getComputedStyle(this.node).height),this.expandedHeight+=e,this.expandedHeight=Math.max(this.expandedHeight,this.collapsedHeight),(this.isCollapsed||this.node.classList.contains("is-collapsed"))&&(this.node.style.height=this.collapsedHeight+"px"),this.updateParentNode(this.expandedHeight-this.collapsedHeight)},o.prototype.toggleCollapse=function(){this.isCollapsed||this.node.classList.contains("is-collapsed")?this.expand():this.collapse()},o.prototype.expand=function(){this.updateHeights(),this.node.offsetWidth,this.node.style.height="auto",this.node.style.height=this.expandedHeight+"px",this.node.classList.remove("is-collapsed"),this.node.classList.add("is-expanded"),this.node.classList.add("is-active"),this.isCollapsed=!1;var e=new CustomEvent("toggle",{bubbles:!0,detail:{action:"expand",origin:this.eventNode}});this.node.dispatchEvent(e),this.expandCallback&&this.expandCallback.bind(this,e)(),this.updateParentNode(this.expandedHeight-this.collapsedHeight)},o.prototype.collapse=function(){this.node.style.height=window.getComputedStyle(this.node).height,this.node.offsetWidth,this.node.style.height=this.collapsedHeight+"px",this.node.classList.remove("is-expanded"),this.node.classList.remove("is-active"),this.node.classList.add("is-collapsed"),this.isCollapsed=!0;var e=new CustomEvent("toggle",{bubbles:!0,detail:{action:"collapse",origin:this.eventNode}});this.node.dispatchEvent(e),this.collapseCallback&&this.collapseCallback.bind(this,e)(),this.updateParentNode(-(this.expandedHeight-this.collapsedHeight))},o.prototype.updateParentNode=function(e){this.node.parentNode&&this.node.parentNode.collapsible&&this.node.parentNode.collapsible.updateHeights(e)},o.prototype.initObserver=function(){this.mutationObserver=new window.MutationObserver(function(e){var t,i,s=0<e[0].addedNodes.length?(t="add",e[0].addedNodes[0]):(t="remove",e[0].removedNodes[0]);this.isCollapsed||(i=window.getComputedStyle(s),e=o.parseNumber(i.height)+o.parseNumber(i["margin-top"])+o.parseNumber(i["margin-bottom"]),this.node.style.height="auto",i=o.parseNumber(window.getComputedStyle(this.node).height),this.node.style.height="add"==t?i-e+"px":this.expandedHeight+"px",this.node.offsetWidth,this.node.style.height=i+"px"),this.expandedHeight=i;s=new CustomEvent("mutate",{bubbles:!0,detail:{action:t,node:s}});this.node.dispatchEvent(s),this.mutationCallback&&this.mutationCallback.bind(this,s)()}.bind(this)),this.mutationObserver.observe(this.node,{childList:!0})},o.parseNumber=function(e){return Number.parseInt(e.slice(0,-2))},window.Collapsible=o}()};e(),this.resolveWith(e)});